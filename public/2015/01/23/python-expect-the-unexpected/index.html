	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.15" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Python: expect the unexpected &middot; Unlogic </title>

  
  <link rel="stylesheet" href="https://svenito.github.io/nowhere/css/poole.css">
  <link rel="stylesheet" href="https://svenito.github.io/nowhere/css/syntax.css">
  <link rel="stylesheet" href="https://svenito.github.io/nowhere/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://svenito.github.io/nowhere/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://svenito.github.io/nowhere/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Unlogic" />
</head>

	<body class="">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://svenito.github.io/nowhere/"><h1>Unlogic</h1></a>
      <p class="lead">
       I have a keyboard, a compiler, and a whole load of luck 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="https://svenito.github.io/nowhere/">Home</a> </li>
      
    </ul>

    <p>Sven Steinbauer</p>
  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1>Python: expect the unexpected</h1>
			  <span class="post-date">Fri, Jan 23, 2015</span>
			      

<p>I&rsquo;ve not really had much of a play with Python 3, but I&rsquo;m aware of some of its
differences. Yesterday I found out about a difference that took me by surprise.
Enough of a surprise that I felt the urge to write this post.</p>

<h1 id="opinion-divided:3294e7ffbfda40bfebd468b4c32cfa57">Opinion Divided</h1>

<p>What surprised me was how <code>/</code> has changed in Python 3. In Python 2.7 it returns
the result of the division of two numbers.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #ae81ff">8</span><span style="color: #f92672">/</span><span style="color: #ae81ff">2</span>
<span style="color: #ae81ff">4</span>
<span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #ae81ff">10</span><span style="color: #f92672">/</span><span style="color: #ae81ff">3</span>
<span style="color: #ae81ff">3</span>
</pre></div>


<p>Checks out to me. <code>10 / 3</code> is 3.3333, and because we are using integers in
the expression, we expect an integer as the result.
Change the input to floats (or at least one of the inputs)</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #ae81ff">10</span><span style="color: #f92672">/</span><span style="color: #ae81ff">3.0</span>
<span style="color: #ae81ff">3.3333333333333335</span>
</pre></div>


<p>and we get a float. Right, nothing weird there. Where it starts getting odd is
that in Python 3 you <strong>always</strong> get a float back, unless you use the <code>//</code> operator.
Apparently that is because too many people expected integer division to return a float.
Maybe it&rsquo;s just me and my fellow oldies who think that the original behaviour is
correct and integer division should yield an integer, not a float. Pretty much all
main stream languages behave like this. In C/C++ you need to cast one of the arguments
to a float to get a float back.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #75715e">#include &lt;iostream&gt;</span>

<span style="color: #66d9ef">int</span> <span style="color: #a6e22e">main</span> <span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">std</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">cout</span> <span style="color: #f92672">&lt;&lt;</span> <span style="color: #ae81ff">10</span> <span style="color: #f92672">/</span> <span style="color: #ae81ff">3</span> <span style="color: #f92672">&lt;&lt;</span> <span style="color: #f8f8f2">std</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">endl;</span>
    <span style="color: #f8f8f2">std</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">cout</span> <span style="color: #f92672">&lt;&lt;</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">float</span><span style="color: #f8f8f2">)</span><span style="color: #ae81ff">10</span> <span style="color: #f92672">/</span> <span style="color: #ae81ff">3</span> <span style="color: #f92672">&lt;&lt;</span> <span style="color: #f8f8f2">std</span><span style="color: #f92672">::</span><span style="color: #f8f8f2">endl;</span>

    <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>


<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%">$<span style="color: #f92672">]</span> ./a.out 
3
3.33333
</pre></div>
</p>

<p>I understand that if you are dividing numbers you will want to have
the accuracy of the float type, but I find this a bit of an odd choice
for the Python devs to make. But perhaps this is the future, and I&rsquo;m
just too old to accept what you whippersnappers are up to with your
fancy <a href="http://i.imgur.com/GUum4gy.gif">languages and tools</a>.</p>

<p>Ultimately, does it really matter? Well yes and no. No, because Python is
dynamically typed, so it doesn&rsquo;t really matter what type the result is, whatever
it gets assigned too will become what it needs to. Yes, because there may be
times when getting a float might cause unexpected behaviour.</p>

<p>It&rsquo;s not the end of the world as such, because the <em>no</em> above greatly
outweighs the <em>yes</em>, but I&rsquo;m still a little surprised at this change. I would
perhaps have kept <code>/</code> as it is and made <code>//</code> the one that always returns a float.</p>

<p>And just to finish:</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f8f8f2">Python</span> <span style="color: #ae81ff">3.4</span><span style="color: #f92672">.</span><span style="color: #ae81ff">0</span>
<span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #ae81ff">10</span><span style="color: #f92672">//</span><span style="color: #ae81ff">3</span>
<span style="color: #ae81ff">3</span>
<span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #ae81ff">10</span><span style="color: #f92672">//</span><span style="color: #ae81ff">3.0</span>
<span style="color: #ae81ff">3.0</span>
</pre></div>
</p>

<p><a href="http://i.imgur.com/WEllYN3.gif">Yeah, sure, why not?</a></p>

			</div>

			
		</div>

  </body>
</html>
