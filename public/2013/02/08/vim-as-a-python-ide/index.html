<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Vim as a Python IDE - Unlogic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <link rel="canonical" href="http://unlogic.co.uk/2013/02/08/vim-as-a-python-ide/">

  
  

  
  

  
  

  <link rel="stylesheet" type="text/css" href="http://unlogic.co.uk//css/combined-min.css">

</head>
<body class="">

<div class="site-wrap">
  <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://unlogic.co.uk/" class="site-title">Unlogic</a>
      <nav class="site-nav right">
      <a href="http://unlogic.co.uk/tags">Tags</a>

</form>

      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>

  <div class="post p2 p-responsive wrap" role="main">
    <div class="measure">
      <div class="post-header mb2">
        <h1 class="py2">Vim as a Python IDE</h1>
        <span class="post-meta">Feb 8, 2013 by </span><br>
        
      </div>

      <article class="post-content">
      

<p>I&rsquo;ve been spending quite a bit of time with our good old buddy Python recently, and when
I do, I always invite along our mutual friend Vim. He&rsquo;s a barrell of laughs and always
knows of a quicker way to do things. So I&rsquo;ve been getting the two acquainted more and more
and Vim&rsquo;s turned into a totally different person. So I am going to share with you how
I setup Vim as my tool of choice when working with Python code. It&rsquo;s by no means the
definitive way of working, but it works for me. I know there&rsquo;s quite a few posts similar to this one,
but these are the tools <strong>I</strong> find useful and use. If you have some suggestions, comments, or
know of additional tools that might be useful, I would like to hear about them in the comments
below.</p>

<p>If you are a Vim user you might find this useful. If you are new to Vim I suggest spending some
time with it before installing any plugins. That way you get used to how Vim works out of the box.
Once you&rsquo;re comfortable with using it, and you&rsquo;ve gotten to grips with the Vim-way, go ahead and
install some extras.</p>

<p>Right, let&rsquo;s get started.</p>

<p>First and foremost you should install <a href="https://github.com/gmarik/vundle">Vundle</a>. Vundle will
make installing and updating all the other tools much easier. It&rsquo;s basically pathogen with a lot
of nice extras, like installing the bundles itself from their Github repos (and other sources).
For more info see the README in the Github repo. To install follow the instructions from the repo,
which are repeated below:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
</code></pre></div>


<p>thenadd the following to your <code>.vimrc</code></p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">set</span> <span class="nb">nocompatible</span>
<span class="k">filetype</span> off

<span class="k">set</span> <span class="nb">rtp</span><span class="p">+=~</span><span class="sr">/.vim/</span>bundle<span class="sr">/vundle/</span>
<span class="k">call</span> vundle#rc<span class="p">()</span>

<span class="c">&quot; let Vundle manage Vundle</span>
<span class="c">&quot; required! </span>
Bundle <span class="s1">&#39;gmarik/vundle&#39;</span>

<span class="c">&quot; The bundles you install will be listed here</span>

<span class="k">filetype</span> plugin indent <span class="k">on</span>

<span class="c">&quot; The rest of your config follows here</span>
</code></pre></div>


<p>Now if you launch Vim and run the command</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="p">:</span>BundleList
</code></pre></div>


<p>a new split should appear listing the Vundle bundle. Everything went ok in that case.</p>

<p>As you go through this article you can install each item separately or you can add the bundles
to your <code>.vimrc</code> one by one and then just install them all at once at the end if you prefer.</p>

<p>Ok, so having done that let&rsquo;s configure a few more things.</p>

<h1 id="highlight-excess-line-length:c2f6c0c20421a669648093b37836b9d8">Highlight excess line length</h1>

<p>You&rsquo;ll probably want to set a restriction to line width for python files. I like to set this to 120
chars. 80 chars is usually the standard, but with modern displays we can allow ourselves a few more,
but you are free to adjust as you like. To enable this excess highlighting, add the following lines
to your <code>.vimrc</code></p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">augroup vimrc_autocmds
    autocmd<span class="p">!</span>
<span class="c">    &quot; highlight characters past column 120</span>
    autocmd <span class="nb">FileType</span> python <span class="nb">highlight</span> Excess ctermbg<span class="p">=</span>DarkGrey guibg<span class="p">=</span>Black
    autocmd <span class="nb">FileType</span> python <span class="k">match</span> Excess <span class="sr">/\%120v.*/</span>
    autocmd <span class="nb">FileType</span> python <span class="k">set</span> <span class="nb">nowrap</span>
    augroup END
</code></pre></div>


<p>Anything that exceeds the line length will be highlighted black, feel free to change this colour
to suit your colourscheme. It also turns off line wrapping for python files.</p>

<h1 id="powerline:c2f6c0c20421a669648093b37836b9d8">Powerline</h1>

<p>Next up we install <a href="https://github.com/Lokaltog/powerline">Powerline</a> which looks like this:</p>


<figure >
    
        <img src="center%20/images/content/powerline.png" />
    
    
</figure>


<p>It shows you your current mode (NORMAL), the current branch in Git, the file you are editing and some other
useful information.</p>

<p>Simply add:</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">Bundle <span class="s1">&#39;Lokaltog/powerline&#39;</span><span class="p">,</span> {<span class="s1">&#39;rtp&#39;</span>: <span class="s1">&#39;powerline/bindings/vim/&#39;</span>}
</code></pre></div>


<p>to your <code>.vimrc</code> below the comment we added earlier <code>&quot; The bundles you install will be listed here</code>. Restart Vim
and run <code>:BundleList</code> again. Now you should also see the Powerline bundle listed there. To install it run the command</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="p">:</span>BundleInstall
</code></pre></div>


<p>You&rsquo;ll see Vundle process the list and report on the status of the installation. Hopefully everything went ok.</p>

<p>Powerline however does require a few more things, most notably patched fonts to display the special characters it uses.
You can get pre-patched fonts from <a href="https://github.com/Lokaltog/powerline-fonts">the powerline-fonts repo</a>. If your
font isn&rsquo;t listed then the powerline repo does provide a font-patcher you can use to try and patch your font. How this
is done however is outside the scope of this article. To select your font and ensure that Powerline is always shown,
you will also need to add these two lines to your <code>.vimrc</code></p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="c">&quot; Powerline setup</span>
<span class="k">set</span> <span class="nb">guifont</span><span class="p">=</span>DejaVu\ Sans\ Mono\ <span class="k">for</span>\ Powerline\ <span class="m">9</span>
<span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span>
</code></pre></div>


<p><code>laststatus</code> ensures that Powerline shows up even if you don&rsquo;t have any splits.</p>

<p>Restart vim and hopefully you&rsquo;ll see your powerline appear at the bottom of you window.</p>

<p>Please note that this version of Powerline is a Python based version and thus requires your Vim to  be built
with Python enabled. To check if it is run:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$&gt;</span> vim --version <span class="p">|</span> grep -i python
</code></pre></div>


<p>from the commandline. If you see <code>+python</code> then you are ok. There is
<a href="https://github.com/Lokaltog/vim-powerline">another Powerline</a> that is a native Vim plugin should
you not have Python enabled or prefer to use it over the Python version.</p>

<h1 id="fugitive:c2f6c0c20421a669648093b37836b9d8">Fugitive</h1>

<p><a href="https://github.com/tpope/vim-fugitive">Fugitive</a> is a <a href="http://git-scm.com/">Git</a> plugin. It basically wraps
most Git commands so that you can call them from inside Vim. They are prefixed with <code>G</code>, for example <code>Gcommit</code>
For example it allows you to stage files directly from Vim and make the commit. It also leverages VimDiff to perform
conflict resolution, blame and the like. There&rsquo;s a whole set of screencasts on how to use it available from
<a href="http://vimcasts.org/episodes/fugitive-vim---a-complement-to-command-line-git/">Vim Casts</a> which I recommend watching.</p>

<p>To install Fugitive, add its bundle to Vundle:</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">Bundle <span class="s1">&#39;tpope/vim-fugitive&#39;</span>
</code></pre></div>


<p>Run <code>:BundleInstall</code> again to install it.</p>

<h1 id="nerdtree:c2f6c0c20421a669648093b37836b9d8">NerdTree</h1>

<p><a href="https://github.com/scrooloose/nerdtree">NerdTree</a> is a filebrowser that pops up in a
split when you need it and features a tree like file browser (hence the  <em>tree</em> part in the name).
It looks somewhat like this:</p>


<figure >
    
        <img src="center%20/images/content/nerdtree.png" />
    
    
</figure>


<p>As usual you just need to add its package to Vundle:</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">Bundle <span class="s1">&#39;scrooloose/nerdtree&#39;</span>
</code></pre></div>


<p>and <code>:BundleInstall</code> once you restart Vim. To activate with <code>F2</code> add the following to <code>.vimrc</code>:</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">map <span class="p">&lt;</span>F2<span class="p">&gt;</span> :NERDTreeToggle<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</code></pre></div>


<p>Press <code>F2</code> in vim and it will take you to the current working directory. Press <code>?</code> to see NerdTree&rsquo;s
list of commands.</p>

<h1 id="python-mode:c2f6c0c20421a669648093b37836b9d8">Python mode</h1>

<p>This is the big one. It basically adds all the Python functionality you could ever want in Vim. Things like Lint,
codecompletion, documentation lookup, jump to classes, refactoring tools etc. You&rsquo;ll find it in
<a href="https://github.com/klen/python-mode">Python-mode</a></p>

<p>Its bundle is:</p>

<div class="highlight"><pre><code class="language-vim" data-lang="vim">Bundle <span class="s1">&#39;klen/python-mode&#39;</span>
</code></pre></div>


<p>Again, <code>:BundleInstall</code> to install it and then we probably want to configure some items. There&rsquo;s a lot to
configure, so if you want the complete picture I suggest you head over to the
<a href="https://github.com/klen/python-mode">Github repo</a> and read the more complete docs,
or run <code>:help python-mode</code> from inside Vim.</p>

<p>I found the following settings most useful personally, but you might want to tweak some settings to suit your needs
and workflow. The following a copy-paste from my .vimrc. The keyboard shortcuts in the comments are the ones I find
most useful and I keep them there for reference:</p>

<p><div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="c">&quot; Python-mode</span>
<span class="c">&quot; Activate rope</span>
<span class="c">&quot; Keys:</span>
<span class="c">&quot; K             Show python docs</span>
<span class="c">&quot; &lt;Ctrl-Space&gt;  Rope autocomplete</span>
<span class="c">&quot; &lt;Ctrl-c&gt;g     Rope goto definition</span>
<span class="c">&quot; &lt;Ctrl-c&gt;d     Rope show documentation</span>
<span class="c">&quot; &lt;Ctrl-c&gt;f     Rope find occurrences</span>
<span class="c">&quot; &lt;Leader&gt;b     Set, unset breakpoint (g:pymode_breakpoint enabled)</span>
<span class="c">&quot; [[            Jump on previous class or function (normal, visual, operator modes)</span>
<span class="c">&quot; ]]            Jump on next class or function (normal, visual, operator modes)</span>
<span class="c">&quot; [M            Jump on previous class or method (normal, visual, operator modes)</span>
<span class="c">&quot; ]M            Jump on next class or method (normal, visual, operator modes)</span>
<span class="k">let</span> <span class="k">g</span>:pymode_rope <span class="p">=</span> <span class="m">1</span>

<span class="c">&quot; Documentation</span>
<span class="k">let</span> <span class="k">g</span>:pymode_doc <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_doc_key <span class="p">=</span> <span class="s1">&#39;K&#39;</span>

<span class="c">&quot;Linting</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint_checker <span class="p">=</span> <span class="s2">&quot;pyflakes,pep8&quot;</span>
<span class="c">&quot; Auto check on save</span>
<span class="k">let</span> <span class="k">g</span>:pymode_lint_write <span class="p">=</span> <span class="m">1</span>

<span class="c">&quot; Support virtualenv</span>
<span class="k">let</span> <span class="k">g</span>:pymode_virtualenv <span class="p">=</span> <span class="m">1</span>

<span class="c">&quot; Enable breakpoints plugin</span>
<span class="k">let</span> <span class="k">g</span>:pymode_breakpoint <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_breakpoint_bind <span class="p">=</span> <span class="s1">&#39;&lt;leader&gt;b&#39;</span>

<span class="c">&quot; syntax highlighting</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_all <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_indent_errors <span class="p">=</span> <span class="k">g</span>:pymode_syntax_all
<span class="k">let</span> <span class="k">g</span>:pymode_syntax_space_errors <span class="p">=</span> <span class="k">g</span>:pymode_syntax_all

<span class="c">&quot; Don&#39;t autofold code</span>
<span class="k">let</span> <span class="k">g</span>:pymode_folding <span class="p">=</span> <span class="m">0</span>
</code></pre></div>
</p>

<p>To explain the above a bit, here&rsquo;s what it does:</p>

<ul>
<li>Allow me to look up Python docs by pressing <code>K</code></li>
<li>Automatically check my code on each save, but only use <code>PyLint</code> or <code>PyFlakes</code></li>
<li>Support virtualenv</li>
<li>Use <code>&lt;leader&gt;b</code> to add a pdb shortcut (inserts <code>import pdb; pdb.set_trace() # XXX BREAKPOINT</code> into your code</li>
<li>Enhanced syntax highlighting and formatting</li>
</ul>

<p>As I said, please read the full docs and adjust the settings as you see fit.</p>

<h1 id="jedi-vim:c2f6c0c20421a669648093b37836b9d8">Jedi vim</h1>

<p>Since I wrote this article I have discovered <a href="https://github.com/davidhalter/jedi-vim">Jedi-vim</a>
which I now use as the autocompletion tool instead of the rope plugin that comes with Python Mode. All you need to do is
add the plugin to the vundle list and turn off Rope by replacing the <code>let g:pymode_rope = 1</code> with
<code>let g:pymode_rope = 0</code>. I feel it&rsquo;s snappier and more capable than Rope. But if you want to avoid
installing another plugin, then feel free to stay with Rope.</p>

<h1 id="other-settings:c2f6c0c20421a669648093b37836b9d8">Other settings</h1>

<p>I also use some specific Vim settings in <code>.vimrc</code> that make the experience a bit nicer for me:</p>

<p><div class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="c">&quot; Use &lt;leader&gt;l to toggle display of whitespace</span>
nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">l</span> :<span class="k">set</span> <span class="nb">list</span><span class="p">!&lt;</span>CR<span class="p">&gt;</span>
<span class="c">&quot; automatically change window&#39;s cwd to file&#39;s dir</span>
<span class="k">set</span> <span class="nb">autochdir</span>

<span class="c">&quot; I&#39;m prefer spaces to tabs</span>
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">expandtab</span>

<span class="c">&quot; more subtle popup colors </span>
<span class="k">if</span> has <span class="p">(</span><span class="s1">&#39;gui_running&#39;</span><span class="p">)</span>
    <span class="nb">highlight</span> Pmenu guibg<span class="p">=</span><span class="mh">#cccccc</span> <span class="k">gui</span><span class="p">=</span><span class="nb">bold</span>    
<span class="k">endif</span>
</code></pre></div>
</p>

<h1 id="summary:c2f6c0c20421a669648093b37836b9d8">Summary</h1>

<p>This is basically the crux of my Python and Vim development setup. I think the core of the whole thing really is
python mode as it provides the most Python specific tools. The other plugins however do add some really useful
functionality to make your life a little easier. You might ask why I don&rsquo;t list things like <code>fuzzy file search</code>
and such, and that&rsquo;s because I don&rsquo;t use it. I&rsquo;ve tried it before and didn&rsquo;t really get on with it very well and I
prefer to either just open the files directly or using <code>NerdTree</code>.</p>

<p>I hope that this post provides some pointers to help you setup your Vim based Python development environment. As
I said above, feel free to leave a comment with any plugins or settings that you find useful, always happy to hear
about what else is out there.</p>

<p>Thanks for reading.</p>

      </article>

      <p class="post-meta">Tags:&nbsp;
        
            
            <a href="http://unlogic.co.uk//tags/python">python</a>
        
            ,&nbsp;
            <a href="http://unlogic.co.uk//tags/vim">vim</a>
        
      </p>

      
<div id="disqus_thread">
  <script type="text/javascript">
     var disqus_shortname = "unlogic";
     var disqus_identifier = "\/2013\/02\/08\/vim-as-a-python-ide\/";

     (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</div>


    </div>
  </div>
</div>
    <footer class="footer">
      <div class="p2 wrap">
        <div class="measure mt1 center">
      <nav class="social-icons icons">
<a class="fa fa-rss rss" href="http://unlogic.co.uk/index.xml"></a>

<a class="fa fa-twitter twitter" href="https://twitter.com/binaryheadache"></a>

</nav>

          <small>
            Copyright &#169; 2015<br>
            Powered by <a href="http://gohugo.io/" target="_blank">Hugo</a> &amp; <a href="https://github.com/azmelanar/hugo-theme-pixyll" target="_blank">Pixyll</a>
          </small>
        </div>
      </div>
    </footer>

    
    <script src="http://unlogic.co.uk/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    


</body>
</html>

