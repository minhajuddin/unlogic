<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bounding Box Rotation on Unlogic</title>
    <link>http://unlogic.co.uk/tags/bounding-box-rotation/</link>
    <description>Recent content in Bounding Box Rotation on Unlogic</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 04 Dec 2009 17:07:43 +0000</lastBuildDate>
    <atom:link href="http://unlogic.co.uk/tags/bounding-box-rotation/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Bounding box of rotated image</title>
      <link>http://unlogic.co.uk/2009/12/04/bounding-box-of-rotated-image/</link>
      <pubDate>Fri, 04 Dec 2009 17:07:43 +0000</pubDate>
      
      <guid>http://unlogic.co.uk/2009/12/04/bounding-box-of-rotated-image/</guid>
      <description>&lt;p&gt;In a previous post I mentioned about finding the width and height of the bounding box of a rotated rectangle, in this post I will explain the math in more detail. Given a 2D rectangle and an arbitrary angle of rotation, how do we work out the new bounding box of the rectangle?&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll use the image below to help illustrate:&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;http://unlogic.co.uk/images/content/bbox.jpg&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;p&gt;The blue rectangle is our original shape and the red one our (obviously) newly rotated rectangle. α is the angle we’ve rotated by in degrees Let’s think back to maths class and try to remember our trigonometry. In order to find the length of a given side in a right angled triangle we take one of the known sides and an angle and apply sin, cos or tan accordingly.&lt;/p&gt;

&lt;p&gt;Our aim here is to find h1, h2, w1, and w2 in order to get&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;h&#39; = h1 + h2
w&#39; = w1 + w2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Where h’ and w’ are the new width and height of the bounding box. Let’s start with w1 and h1, referring back to the top right triangle in the diagram. We know the length of the hypotenuse so we need to use cos for w1 (adjacent) and then for h1 (opposite) we need to use sin&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;w1 = h * sin(a) 
h1 = h * cos(a)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Half way there. Next we find w2 and h2 in a similar way&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;w2 = w * cos(a)
h2 = w * sin(a)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now all we need to do is add h1 and h2 together to get h’ and w1 to w1 to get w’. In code that is&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;    &lt;span style=&#34;color: #66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;h_dash&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;h&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;fabs(cos(alpha))&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;fabs(sin(alpha));&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;w_dash&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;fabs(cos(alpha))&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;h&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;fabs(sin(alpha));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The more astute of you may have noticed that this is slightly different to what I posted in my previous article. That’s because I noticed I can do away with beta and use just the angle of rotation. In terms of execution time this means very little as beta is obtained once by subtraction alpha from 90, but in a neatness sense it’s an improvement.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>